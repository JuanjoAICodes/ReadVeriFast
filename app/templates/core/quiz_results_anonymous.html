{% extends "base.html" %}

{% block content %}
<article style="text-align: center;">
    {% if approved %}
        <header>
            <h2>¡Cuestionario Superado!</h2>
            <p>Has ganado <strong>{{ xp_earned }} XP</strong>. Tu total como invitado es ahora <strong>{{ guest_xp }} XP</strong>.</p>
        </header>

        <p>Como invitado, tu progreso se guarda temporalmente. ¡Regístrate para guardarlo permanentemente!</p>

        <footer>
            <div class="grid">
                <a href="{{ url_for('core.articles') }}" role="button" class="secondary">Página Principal</a>
                <a href="{{ url_for('auth.register') }}" role="button">Registrarme para guardar mi progreso</a>
            </div>
        </footer>

    {% else %}
        <header>
            <h2>¡Cuestionario No Superado!</h2>
            <p>No has alcanzado la puntuación mínima para pasar este cuestionario.</p>
            <p>¡No te rindas, la práctica hace al maestro!</p>
        </header>

        {% if new_wpm %}
        <p>Hemos ajustado tu velocidad de lectura recomendada a <strong>{{ new_wpm }} PPM</strong> para ayudarte.</p>
        {% endif %}
        
        <p>Tómate tu tiempo para asimilar el contenido y vuelve a intentarlo.</p>

        <footer>
            <div class="grid">
                <a href="{{ url_for('core.article_detail', article_id=article.id) }}" role="button" class="secondary">Reintentar este artículo</a>
                <a href="{{ article.url }}" target="_blank" rel="noopener noreferrer" role="button" class="contrast">Ver artículo original</a>
            </div>
        </footer>
    {% endif %}
</article>
{% endblock %}
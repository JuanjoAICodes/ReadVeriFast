{
  "enabled": true,
  "name": "HTMX Template Validation Hook",
  "description": "Validates HTMX templates for proper patterns and Alpine.js integration",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "verifast_app/templates/**/*.html",
      "templates/**/*.html"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "An HTMX template has been modified. Please validate template patterns and Alpine.js integration:\n\n**HTMX Attribute Validation:**\n1. **hx-get URLs**: Ensure URLs exist in urls.py (speed_reader_init, quiz_start)\n2. **hx-post URLs**: Validate URLs exist and include CSRF protection\n3. **hx-target selectors**: Verify target elements exist (#speed-reader-section, #quiz-section)\n4. **hx-swap values**: Should be innerHTML, outerHTML, beforeend, afterend, beforebegin, afterbegin, or delete\n5. **Critical URLs to check**: speed_reader_init, speed_reader_complete, quiz_start, add_comment\n\n**Alpine.js Integration Validation:**\n1. **x-data components**: Validate component initialization and proper formatting\n2. **x-text bindings**: Ensure properties exist in component data\n3. **Event handlers**: Verify @click methods exist in component\n\n**Progressive Enhancement Check:**\n1. **JavaScript fallbacks**: Check for noscript tags for critical functionality\n2. **Form fallbacks**: Ensure forms work without JavaScript (hx-boost)\n\n**Common Suggestions:**\n- Add {% csrf_token %} to HTMX POST requests\n- Add hx-target to specify response placement\n- Include error handling in Alpine.js components\n\n**Auto-complete patterns available:**\n- hx-get, hx-post, hx-target, hx-swap, hx-indicator\n- x-data for speedReader and quizHandler components\n\n**References:**\n- HTMX Architecture Spec: .kiro/specs/htmx-hybrid-architecture/\n- HTMX Debugging Guide: documentation/troubleshooting/htmx-debugging-guide.md\n- Project Architecture Guide: documentation/PROJECT_ARCHITECTURE_GUIDE.md\n\nReport any template issues and suggest fixes for proper HTMX/Alpine.js integration."
  }
}
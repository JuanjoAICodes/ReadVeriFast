{% extends "base.html" %}

{% block content %}
<article>
    <header>
        <img src="{{ article.image_url or url_for('static', filename='images/default_article_image.png') }}" alt="Imagen del artículo" style="width: 100%; max-height: 400px; object-fit: cover; border-radius: var(--border-radius); margin-bottom: 1rem;">
        <h1>{{ article.title or 'Artículo sin título' }}</h1>
        <p>
            <small>
                {{ _('Submitted by') }} {{ article.author.email }} {{ _('on') }} {{ article.timestamp.strftime('%d %b, %Y') }}
            </small>
        </p>
        {% if article.tags %}
        <footer>
            {% for tag in article.tags %}
                <a href="{{ url_for('core.articles_by_tag', tag_name=tag.name) }}" style="margin-right: 0.5rem;"><small>#{{ tag.name }}</small></a>
            {% endfor %}
        </footer>
        {% endif %}
    </header>

    <hr>

    <!-- Speed Reader Section -->
    <section id="speed-reader">
        <h2>{{ _('Speed Reader') }}</h2>
        <div class="speed-reader-container">
            <div id="word-display" class="word-display-box" data-text="{{ article.clean_content or '' }}">
                {{ _('Click "Start"') }}
            </div>
            <div class="speed-controls">
                <label for="wpm-slider">
                    {{ _('Speed') }}: <span id="wpm-value">{{ current_wpm }}</span> {{ _('WPM') }}
                    <input type="range" id="wpm-slider" name="wpm-slider" min="100" max="{{ max_wpm + 100 }}" value="{{ current_wpm }}">
                </label>
                <button id="start-stop-btn">{{ _('Start') }}</button>
            </div>
        </div>
    </section>

    <hr>

    <!-- Quiz Section -->
    {% if quiz_questions %}
    <section id="quiz-section">
        <h2>{{ _('Comprehension Quiz') }}</h2>
        <form method="POST" action="{{ url_for('core.submit_quiz', article_id=article.id) }}">
            {{ form.hidden_tag() }}
            <input type="hidden" name="wpm_used" id="wpm-used-input" value="{{ current_wpm }}">

            {% for question in quiz_questions.questions %}
            <fieldset>
                <legend>{{ loop.index }}. {{ question.question }}</legend>
                {% set question_index = loop.index %}
                {% for option in question.options %}
                <label>
                    <input type="radio" name="question_{{ question_index }}" value="{{ option }}" required>
                    {{ option }}
                </label>
                {% endfor %}
            </fieldset>
            {% endfor %}

            <button type="submit">{{ _('Submit Answers') }}</button>
        </form>
    </section>
    {% else %}
    <p>{{ _('The quiz for this article is not yet available.') }}</p>
    {% endif %}

</article>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const wordDisplay = document.getElementById('word-display');
    const startStopBtn = document.getElementById('start-stop-btn');
    const wpmSlider = document.getElementById('wpm-slider');
    const wpmValue = document.getElementById('wpm-value');
    const wpmUsedInput = document.getElementById('wpm-used-input');

    let words = (wordDisplay.dataset.text || '').split(/\s+/).filter(Boolean);
    let currentIndex = 0;
    let intervalId = null;
    let wpm = parseInt(wpmSlider.value, 10);

    function updateWpm() {
        wpm = parseInt(wpmSlider.value, 10);
        wpmValue.textContent = wpm;
        wpmUsedInput.value = wpm; // Actualiza el campo oculto del formulario
    }

    function getIntervalTime() {
        return 60000 / wpm;
    }

    function displayNextWord() {
        if (currentIndex < words.length) {
            wordDisplay.textContent = words[currentIndex];
            currentIndex++;
        } else {
            stopReading();
            wordDisplay.textContent = "¡Lectura Finalizada!";
        }
    }

    function startReading() {
        if (intervalId) return;
        document.body.classList.add('focus-mode-active');
        intervalId = setInterval(displayNextWord, getIntervalTime());
        startStopBtn.textContent = 'Detener';
    }

    function stopReading() {
        if (!intervalId) return;
        document.body.classList.remove('focus-mode-active');
        clearInterval(intervalId);
        intervalId = null;
        startStopBtn.textContent = 'Iniciar';
        if (currentIndex < words.length) {
            wordDisplay.textContent = "Lectura detenida.";
        }
    }

    wpmSlider.addEventListener('input', function() {
        updateWpm();
        if (intervalId) { // Si la lectura está en curso, reajusta el intervalo
            clearInterval(intervalId);
            intervalId = setInterval(displayNextWord, getIntervalTime());
        }
    });

    startStopBtn.addEventListener('click', function() {
        if (intervalId) {
            stopReading();
        } else {
            startReading();
        }
    });
});
</script>
{% endblock %}

```

### 2. Creación de Plantillas de Resultados del Cuestionario

He creado las tres plantillas para los resultados (`success`, `fail`, `anonymous`) usando la etiqueta `<article>` para presentar la información y `<details>` para la revisión de errores, lo que crea un acordeón interactivo de forma nativa.

```diff